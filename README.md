NONAME генератор выходного напряжения 0-10v / 0-5v с управлением по modbus

# Описание железа:

## Разъем

* 24 В - Плюс рабочего источника питания для основной платы, DC24V
* GND - Рабочая мощность заземления основной платы
* A - Фотоэлектрическая изоляция Положительный интерфейс связи
* B - Фотоэлектрическая изоляция Коммуникационный интерфейс отрицательный
* VSS - Фотоэлектрическая изоляция интерфейса связи (не обязательно)
* V0 ~ V3 - Выходной канал напряжения постоянного тока 0 ~ 3 (реляционный)\**

## Параметры

* Источник питания: 24v
* DA точность преобразования: 12
* Напряжение точность вывода: 0,01 V
* Напряжение Разрешающая способность на выходе : 0,001 V 
* Выходной ток: возможности : 10mA (макс)
* 485 интерфейс скорость передачи : 1200/2400/4800/9600/19200/38400/57600/115200bps регулируемая
* 485 интерфейсный контрольный бит связи : Нет четности/нечетности/даже проверить регулируемый

## Индикаторы

* 信号 - signal
* 接收 - receive
* 发送 - send

# Описание регистров МODBUS RTU

Скорость по умолчанию: 9600,8,N,1

Адрес по умолчанию: 1

## Настроить ID ведомого

Например, если только одно ведомое устройство подключено к шине 485, команда идентификатора конфигурации может быть выдана ему в этом оцепенении.

Формат сообщения, отправляемого хостом:

| Содержание                 | Байт | Данные | Примечание                                                   |
| -------------------------- | ---- | ------ | ------------------------------------------------------------ |
| Адрес ведомого             | 1    | 00H    | Широковещательный  адрес, поэтому на шине 485 требуется только одно ведомое устройство. |
| Код функции                | 1    | 06H    | Запись  в регистр                                            |
| Адрес начального  регистра | 2    | 0000H  | Адрес  целевого регистра, десятичный адрес: 0000 Идентификационный номер  подчиненного устройства (номер станции), хранящийся в этом регистре. |
| Запись  данных             | 2    | 0100H  | Записывается  из идентификационного номера ( 01) + 00, первый действительный 1 байт |
| CRC проверка               | 2    | XXXXH  | CRC- код всех  предыдущих данных                             |

Фактическое отправленное сообщение : 00 06 00 00 01 00 CRC_L CRC_H|

 

Формат сообщения, возвращаемый ведомым устройством: 

| Содержание                 | Байт | Данные | Примечание                                                   |
| -------------------------- | ---- | ------ | ------------------------------------------------------------ |
| Адрес ведомого             | 1    | 00H    | Широковещательный  адрес, поэтому на шине 485 требуется только одно ведомое устройство. |
| Код функции                | 1    | 06H    | Запись  в регистр                                            |
| Адрес начального  регистра | 2    | 0000H  | Адрес  целевого регистра, десятичный адрес: 0000 Идентификационный номер  подчиненного устройства (номер станции), хранящийся в этом регистре. |
| Запись  данных             | 2    | 0100H  | Записать  1 слово (2 байта), вернуть как исходные данные     |
| CRC проверка               | 2    | XXXXH  | CRC- код всех  предыдущих данных                             |
| Проверка CRC               | 2    | XXXXH  | CRC- код всех  предыдущих данных                             |

##  Считать значение выходного напряжения

Например: Модуль вывода напряжения типа V5-0-0 UT 1 подключен к шине 485 , ID - 01, считайте значение выходного напряжения.

**Формат сообщения, отправляемого хостом :**

| Содержание                 | Байт | Данные | Примечание                                                   |
| -------------------------- | ---- | ------ | ------------------------------------------------------------ |
| Адрес ведомого             | 1    | 01H    | Раб 01                                                       |
| Код функции                | 1    | 03H    | Прочитать  регистр                                           |
| Адрес начального  регистра | 2    | 0298H  | Адрес  целевого регистра: 0298H  Десятичный  адрес: 0664  0298H  Напряжение выходного канала 0 значение напряжения |
| Прочитать  длину слова     | 2    | 0001   | Считайте  1 слово данных напряжения                          |
| Проверка CRC               | 2    | XXXXw  | CRC проверка всех  предыдущих данных                         |

Примечание: ведомое устройство запускается с канала 0 и загружает данные выходного напряжения каждого канала в порядке, соответствующем количеству слов, возвращаемых ведущим.

 **Формат сообщения, возвращаемый ведомым устройством:**

| Содержание                     | Байт | Данные | Примечание                                   |
| ------------------------------ | ---- | ------ | -------------------------------------------- |
| Адрес подчиненного  устройства | 1    | 01     | Раб 01                                       |
| Код функции                    | 1    | 03     | Читать  регистр                              |
| Возврат  длины байта           | 1    | 02     | Возвращает значение  напряжения из 2 байтов. |
| Вернуть  данные                | 2    | 04E7   | 00 канал, 1.255V                             |
| Проверка CRC                   | 2    | XXXX   | CRC проверка всех  предыдущих данных         |

Описание формата возвращаемых данных: каждое слово каждого канала представляет собой двухбайтовое целое число без знака, которое ровно в 1000 раз превышает фактическое значение напряжения после преобразования в десятичное.


## Установить значение выходного напряжения

Например: модуль вывода напряжения V5-0-0UT1 подключен к шине 485, ID равен 01H, и всего 1 канал вывода напряжения, установите значение выходного напряжения этого канала.

**Формат сообщения, отправляемого хостом:**

| Содержание                 | Байт | Данные | Примечание                                                   |
| -------------------------- | ---- | ------ | ------------------------------------------------------------ |
| Адрес ведомого             | 1    | 01H    | Раб 01                                                       |
| Код функции                | 1    | 06H    | Записать  единственный регистр                               |
| Адрес начального  регистра | 2    | 0298H  | 0298H Значение  выходного напряжения канала 0 сохраняется в этом регистре Десятичный адрес:  0664 |
| Запись  данных             | 2    | 04E7H  | Установите  значение выходного напряжения канала 0 на 1. 255 V |
| Проверка CRC               | 2    | XXXXH  | CRC проверка всех  предыдущих данных                         |

Описание:

04E7H - это 1255 в десятичной системе, что в 1000 раз больше фактического значения выходного напряжения. 

**Формат сообщения, возвращаемый ведомым устройством:**

| Содержание                 | Байт | Данные | Примечание                                  |
| -------------------------- | ---- | ------ | ------------------------------------------- |
| Адрес ведомого             | 1    | 01H    | Раб 01                                      |
| Код функции                | 1    | 06H    | Запись  в регистр                           |
| Адрес начального  регистра | 2    | 0298   | Адрес регистра  назначения                  |
| Запишите  длину слова      | 2    | 0001   | Успешно  записать 1 слово данных напряжения |
| Проверка CRC               | 2    | XXXX   | CRC проверка всех  предыдущих данных        |

## Пример сообщения:

000600000100 -  установить ID=\ до 01H

0106029805 - B0 для установки выходного напряжения значение 1,456 в

010302980001 - считывание 1 канала выходное напряжение значение

Licensing
---------

aiocoap is published under the Apache License 2.0, see LICENSE_ for details.


Copyright (c) 2019 Mikhail Razgovorov <http://razgovorov.ru/>,

.. _LICENSE: LICENSE

